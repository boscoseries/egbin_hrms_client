{"version":3,"sources":["views/base/title/Title.js","views/pages/admin/Employees.js"],"names":["Title","containerClass","titleClass","title","lineClass","className","Employees","state","useSelector","dispatch","useDispatch","history","useHistory","users","results","handleRequestDetails","e","preventDefault","id","target","classList","push","useEffect","fetchUsers","handleStatusUpdate","swal","content","style","border","onChange","console","log","value","buttons","cancel","confirm","dangerMode","closeOnClickOutside","then","a","updateStatus","data","text","icon","button","timer","handleDelete","fluid","width","height","fontSize","length","responsive","scope","map","entry","index","firstname","lastname","middlename","staff_id","annual_leave","sick_leave","exam_leave","relieve_staff","compassionate_leave","role","line_manager","detailsKey","displayDetails","deleteKey","updateKey","statusUpdate"],"mappings":"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","file":"static/js/12.382107e1.chunk.js","sourcesContent":["import React from \"react\";\n\nexport default function Title ({ containerClass, titleClass, title, lineClass }) {\n  return (\n    <div className={containerClass}>\n      <p className={titleClass}>{title}</p>\n    </div>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { Card, Table, Container, Row } from \"reactstrap\";\nimport Title from \"../../base/title/Title\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { fetchUsers, updateStatus } from \"../../../redux/actions\";\nimport { TheHeaderDropdownTasks } from \"../../../containers\";\nimport swal from \"@sweetalert/with-react\";\n\nconst Employees = () => {\n  const state = useSelector(state => state);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const users = state.users.users.results;\n\n  const handleRequestDetails = e => {\n    e.preventDefault();\n    const id = e.target.classList[0];\n    return history.push(`/admin/employee/details/${id}`);\n  };\n\n  useEffect(() => {\n    dispatch(fetchUsers());\n  }, []);\n\n  const handleStatusUpdate = e => {\n    e.preventDefault();\n    const id = e.target.classList[0];\n    swal(\"Update Leave Request Status\", {\n      content: (\n        <select className=\"form-control\" style={{ border: \"2px solid\" }} onChange={e => console.log(e)}>\n          <option value=\"\">--Choose a Status--</option>\n          <option value=\"APPROVED\">APPROVED</option>\n          <option value=\"REJECTED\">REJECTED</option>\n          <option value=\"PENDING\">PENDING</option>\n        </select>\n      ),\n      buttons: {\n        cancel: true,\n        confirm: \"Update!\"\n      },\n      dangerMode: true,\n      closeOnClickOutside: false\n    }).then(async value => {\n      if (value) {\n        console.log({ value });\n        const response = await dispatch(updateStatus(id, value));\n        response.data\n          ? swal({\n              text: \"Update Successful\",\n              icon: \"success\",\n              button: false,\n              timer: 2000\n            })\n          : swal({\n              text: \"Error updating Status\",\n              icon: \"error\",\n              timer: 1500\n            });\n      } else {\n        swal({\n          text: \"Update cancelled\",\n          icon: \"error\",\n          timer: 1200\n        });\n      }\n    });\n  };\n\n  console.log(users);\n\n  const handleDelete = () => {};\n\n  if (!users) return null;\n\n  return (\n    <>\n      <h2>Manage Employees</h2>\n      <div>\n        <div className=\"pb-5 pt-5 pt-md-8\">\n          <Container fluid style={{ width: \"97%\" }}>\n            {!users && (\n              <div style={{ height: \"70vh\" }}>\n                <div className=\"bg-white\">\n                  <div\n                    className=\"d-flex flex-column justify-content-center align-items-center text-dark\"\n                    style={{ height: \"30vh\", fontSize: \"17px\" }}>\n                    <p className=\"pb-0 mb-1 font-weight-bold\">You don't have any leave requests for now.</p>\n                  </div>\n                </div>\n              </div>\n            )}\n            {users.length > 0 && (\n              <>\n                <Title titleClass=\"title text-white\" title=\"Leave Requests\" />\n                <Row>\n                  <div className=\"col\">\n                    <Card className=\"shadow p-0\">\n                      <Table className=\"align-items-center table-flush\" responsive>\n                        <thead className=\"thead-light\">\n                          <tr>\n                            <th scope=\"col\">Staff Id</th>\n                            <th scope=\"col\">Firstname</th>\n                            <th scope=\"col\">Lastname</th>\n                            <th scope=\"col\">Middlename</th>\n                            <th scope=\"col\">Annual Leave</th>\n                            <th scope=\"col\">Sick Leave</th>\n                            <th scope=\"col\">Exam Leave</th>\n                            <th scope=\"col\">Compass. Leave</th>\n                            <th scope=\"col\">Line Manager</th>\n                            <th scope=\"col\">Role</th>\n                            <th scope=\"col\" />\n                          </tr>\n                        </thead>\n\n                        <tbody>\n                          {users.map((entry, index) => {\n                            const {\n                              id,\n                              firstname,\n                              lastname,\n                              middlename,\n                              staff_id,\n                              annual_leave,\n                              sick_leave,\n                              exam_leave,\n                              relieve_staff,\n                              compassionate_leave,\n                              role,\n                              line_manager\n                            } = entry;\n                            console.log(relieve_staff);\n                            return (\n                              <tr key={index}>\n                                <td>\n                                  <strong>{staff_id}</strong>\n                                </td>\n                                <td>{firstname}</td>\n                                <td>\n                                  <div>{lastname}</div>\n                                </td>\n                                <td>\n                                  <div>{middlename}</div>\n                                </td>\n                                <td>\n                                  <div>{annual_leave}</div>\n                                </td>\n                                <td>\n                                  <div>{exam_leave}</div>\n                                </td>\n                                <td>\n                                  <div>{sick_leave}</div>\n                                </td>\n                                <td>\n                                  <div>{compassionate_leave}</div>\n                                </td>\n                                <td>\n                                  <div>{`${line_manager.firstname} ${line_manager.lastname}`}</div>\n                                </td>\n                                <td>\n                                  <div>{role}</div>\n                                </td>\n                                <td className=\"text-right\">\n                                  <span>\n                                    <TheHeaderDropdownTasks\n                                      detailsKey={\"View Details\"}\n                                      className={id}\n                                      displayDetails={handleRequestDetails}\n                                      handleDelete={handleDelete}\n                                      deleteKey={\"Delete Request\"}\n                                      updateKey={\"Update Status\"}\n                                      statusUpdate={handleStatusUpdate}\n                                    />\n                                  </span>\n                                </td>\n                              </tr>\n                            );\n                          })}\n                        </tbody>\n                      </Table>\n                    </Card>\n                  </div>\n                </Row>\n              </>\n            )}\n          </Container>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Employees;\n"],"sourceRoot":""}