{"version":3,"sources":["views/base/forms/LeaveRequest.js","views/pages/employee/LeaveRequest.js"],"names":["LeaveRequest","alert","useAlert","dispatch","useDispatch","userState","useSelector","state","users","user","useState","availableDays","setavailableDays","formValues","setFormValues","useLayoutEffect","leaveType","onInputChange","e","name","target","value","className","xs","md","action","method","encType","row","sm","htmlFor","custom","id","onChange","type","placeholder","required","rows","line_manager","size","color","onClick","Object","keys","length","show","duration","data","leave_start","Date","leave_end","resumption_date","createLeaveRequest","console","log"],"mappings":"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","file":"static/js/15.a1568f30.chunk.js","sourcesContent":["import React, { useState, useLayoutEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { createLeaveRequest } from \"../../../redux/actions\";\nimport { useSelector } from \"react-redux\";\nimport { useAlert } from \"react-alert\";\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCardFooter,\n  CCardHeader,\n  CCol,\n  CForm,\n  CFormGroup,\n  CTextarea,\n  CInput,\n  CLabel,\n  CSelect,\n  CRow\n} from \"@coreui/react\";\nimport CIcon from \"@coreui/icons-react\";\n\nconst LeaveRequest = () => {\n  const alert = useAlert();\n  const dispatch = useDispatch();\n  const state = useSelector(state => state);\n  const userState = state.users.user;\n  const [availableDays, setavailableDays] = useState(\"\");\n  const [formValues, setFormValues] = useState({});\n\n  useLayoutEffect(() => {\n    setavailableDays(userState[formValues.leaveType]);\n  }, [formValues.leaveType]);\n\n  const onInputChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    setFormValues(() => {\n      formValues[name] = value;\n      return { ...formValues };\n    });\n  };\n\n  const handleSubmit = () => {\n    if (Object.keys(formValues).length < 6) {\n      return alert.show(\"Please complete all fields\");\n    }\n    if (formValues.duration > availableDays) {\n      return alert.show(\"You can only take \" + availableDays + \" days\");\n    }\n    if (formValues.duration >= 14) {\n      return alert.show(\"Please input a duration below 14 days\");\n    }\n    const data = {\n      ...formValues,\n      leave_start: new Date(formValues.leave_start),\n      leave_end: new Date(formValues.leave_end),\n      resumption_date: new Date(formValues.resumption_date)\n    };\n    dispatch(createLeaveRequest(data));\n  };\n\n\n\n  return (\n    <>\n      <CRow className=\"d-flex justify-content-center\">\n        <CCol xs=\"12\" md=\"6\">\n          <CCard>\n            <CCardHeader className=\"p-8 \">\n              <strong>Leave Request Form</strong>\n            </CCardHeader>\n            <CCardBody>\n              <CForm action=\"\" method=\"post\" encType=\"multipart/form-data\" className=\"form-horizontal\">\n                {availableDays && (\n                  <CFormGroup row>\n                    <CCol md=\"3\">\n                      <CLabel>\n                        <strong>Availabe Days:</strong>\n                      </CLabel>\n                    </CCol>\n                    <CCol xs=\"12\" md=\"9\">\n                      <p className=\"form-control-static\">\n                        <strong>{availableDays}</strong>\n                      </p>\n                    </CCol>\n                  </CFormGroup>\n                )}\n                <CFormGroup row>\n                  <CCol sm=\"12\" md=\"6\">\n                    <CLabel htmlFor=\"leaveType\">Leave Type</CLabel>\n                    <CSelect custom name=\"leaveType\" id=\"leaveType\" onChange={onInputChange}>\n                      <option value=\"\">Select Leave Type</option>\n                      <option value=\"annual_leave\">Annual Leave</option>\n                      <option value=\"exam_leave\">Examination Leave</option>\n                      <option value=\"sick_leave\">Sick Leave</option>\n                      <option value=\"compassionate_leave\">Compassionate Leave</option>\n                    </CSelect>\n                  </CCol>\n                  <CCol md=\"6\">\n                    <CLabel htmlFor=\"duration\">Duration</CLabel>\n                    <CInput id=\"duration\" name=\"duration\" type=\"number\" placeholder=\"Number of days\" onChange={onInputChange} required />\n                  </CCol>\n                </CFormGroup>\n\n                <CFormGroup row>\n                  <CCol sm=\"12\" md=\"6\">\n                    <CLabel htmlFor=\"leave_start\">Start</CLabel>\n                    <CInput type=\"date\" id=\"leave_start\" name=\"leave_start\" placeholder=\"date\" onChange={onInputChange} />\n                  </CCol>\n                  <CCol sm=\"12\" md=\"6\">\n                    <CLabel htmlFor=\"leave_end\">End</CLabel>\n                    <CInput type=\"date\" id=\"leave_end\" name=\"leave_end\" placeholder=\"date\" onChange={onInputChange} />\n                  </CCol>\n                </CFormGroup>\n                <CFormGroup row>\n                  <CCol sm=\"12\" md=\"6\">\n                    <CLabel htmlFor=\"resumption_date\">Resumption Date</CLabel>\n                    <CInput type=\"date\" id=\"resumption_date\" name=\"resumption_date\" placeholder=\"date\" onChange={onInputChange} />\n                  </CCol>\n                  <CCol sm=\"12\" md=\"6\">\n                    <CLabel htmlFor=\"relieveStaff\">Relieve Staff</CLabel>\n                    <CSelect custom name=\"relieveStaff\" id=\"relieveStaff\" onChange={onInputChange}>\n                      <option value=\"0\">Select Employee</option>\n                      <option value=\"1\">Staff 1</option>\n                      <option value=\"2\">Staff 2</option>\n                    </CSelect>\n                  </CCol>\n                </CFormGroup>\n\n                <CFormGroup row>\n                  <CCol sm=\"12\">\n                    <CLabel htmlFor=\"description\">Description</CLabel>\n                    <CTextarea name=\"description\" id=\"description\" rows=\"4\" placeholder=\"Tell us why...\" onChange={onInputChange} />\n                  </CCol>\n                </CFormGroup>\n              </CForm>\n              <div>Reporting Manager: {userState.line_manager}</div>\n            </CCardBody>\n            <CCardFooter className=\"d-flex justify-content-between\">\n              <CButton type=\"submit\" size=\"sm\" color=\"primary\" onClick={handleSubmit}>\n                <CIcon name=\"cil-scrubber\" /> Submit\n              </CButton>\n              <CButton type=\"reset\" size=\"sm\" color=\"danger\">\n                <CIcon name=\"cil-ban\" onClick={() => console.log(\"cancelled\")} /> Cancel\n              </CButton>\n            </CCardFooter>\n          </CCard>\n        </CCol>\n      </CRow>\n    </>\n  );\n};\n\nexport default LeaveRequest;\n","import React from \"react\";\nimport LeaveRequestForm from \"../../base/forms/LeaveRequest\"\n\nconst LeaveRequest = () => {\n  return (\n    <div>\n      <LeaveRequestForm />\n    </div>\n  );\n};\n\nexport default LeaveRequest;\n"],"sourceRoot":""}