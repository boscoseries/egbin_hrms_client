{"version":3,"sources":["redux/config.js","redux/actions/action/employee.js","redux/actions/action/leave.js","redux/types/leave.js","views/pages/login/Login.js"],"names":["url","token","localStorage","getItem","axios","require","login","data","dispatch","method","headers","then","response","type","LOGIN","payload","result","setItem","access","catch","err","decodeToken","token_key","decoded","jwt_decode","createLeaveRequest","authorization","console","log","Login","alert","useAlert","history","useHistory","useDispatch","useState","userCreds","setUserCreds","onInputChange","e","name","target","value","handleSubmit","a","push","show","className","md","placeholder","autoComplete","onChange","color","onClick","xs"],"mappings":"oHAAA,IAAIA,EAAJ,oEAKEA,EAAM,kCAER,IAAMC,EAAK,iBAAaC,aAAaC,QAAQ,S,sKCJvCC,EAAQC,EAAQ,KAETC,EAAQ,SAAAC,GAAI,OAAI,SAAAC,GAC3B,OAAOJ,EAAM,CACXK,OAAQ,OACRT,IAAI,GAAD,OAAKA,IAAL,4BACHO,KAAMA,EACNG,QAAS,CACP,eAAgB,sBAGjBC,MAAK,SAAAC,GAMJ,OALAJ,EAAS,CACPK,KAAMC,IACNC,QAASH,EAASL,KAAKS,SAEzBd,aAAae,QAAQ,MAAOL,EAASL,KAAKS,OAAOE,QAC1CN,EAASL,QAEjBY,OAAM,SAAAC,GACL,OAAOA,OAIAC,EAAc,SAACC,GAAD,OAAe,SAAAd,GACxC,IAAMe,EAAUC,YAAWF,GAK3B,OAJAd,EAAS,CACPK,KAAMC,IACNC,QAASQ,IAEJA,IC/BHnB,EAAQC,EAAQ,KAEToB,EAAqB,SAAAlB,GAAI,OAAI,SAAAC,GACxC,OAAOJ,EAAM,CACXK,OAAQ,OACRT,IAAI,GAAD,OAAKA,IAAL,kBACHO,KAAMA,EACNG,QAAS,CACP,eAAgB,mBAChBgB,cAAezB,OAGhBU,MAAK,SAAAC,GAMJ,OALAJ,EAAS,CACPK,KCfoB,eDgBpBE,QAASH,EAASL,OAEpBoB,QAAQC,IAAIhB,EAASL,MACdK,EAASL,QAEjBY,OAAM,SAAAC,GACL,OAAOA,Q,2JEuEES,UAzED,WACZ,IAAMC,EAAQC,cACRC,EAAUC,cACVzB,EAAW0B,cAHC,EAIgBC,mBAAS,IAJzB,mBAIXC,EAJW,KAIAC,EAJA,KAMZC,EAAgB,SAAAC,GACpB,IAAMC,EAAOD,EAAEE,OAAOD,KAChBE,EAAQH,EAAEE,OAAOC,MACvBL,GAAa,WAEX,OADAD,EAAUI,GAAQE,EACX,eAAKN,OAIVO,EAAY,uCAAG,sBAAAC,EAAA,sEACApC,EAASF,YAAM,eAAK8B,KADpB,kBAEVpB,OAFU,yCAGVgB,EAAQa,KAAK,eAHH,cAKjBf,EAAMgB,KAAK,gCALM,kBAMVd,EAAQa,KAAK,WANH,2CAAH,qDAUlB,OACE,qBAAKE,UAAU,qDAAf,SACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAMA,UAAU,yBAAhB,SACE,cAAC,IAAD,CAAMC,GAAG,IAAT,SACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAOD,UAAU,MAAjB,SACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,uCACA,mBAAGA,UAAU,aAAb,qCACA,eAAC,IAAD,CAAaA,UAAU,OAAvB,UACE,cAAC,IAAD,UACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAOP,KAAK,iBAGhB,cAAC,IAAD,CAAQ3B,KAAK,OAAO2B,KAAK,WAAWS,YAAY,WAAWC,aAAa,WAAWC,SAAUb,OAE/F,eAAC,IAAD,CAAaS,UAAU,OAAvB,UACE,cAAC,IAAD,UACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAOP,KAAK,wBAGhB,cAAC,IAAD,CAAQ3B,KAAK,WAAW2B,KAAK,WAAWS,YAAY,WAAWC,aAAa,mBAAmBC,SAAUb,OAE3G,cAAC,IAAD,CAAaS,UAAU,OAAvB,SACE,cAAC,IAAD,CAASK,MAAM,UAAUL,UAAU,aAAaM,QAASV,EAAzD,qBAIF,cAAC,IAAD,CAAMW,GAAG,IAAIP,UAAU,aAAvB,SACE,cAAC,IAAD,CAASK,MAAM,OAAOL,UAAU,OAAOM,QAASV,EAAhD","file":"static/js/7.400724b5.chunk.js","sourcesContent":["let url;\n\nif (process.env.NODE_ENV === \"development\") {\n  url = \"http://localhost:8000\";\n} else if (process.env.NODE_ENV === \"production\") {\n  url = \"https://egbin-api.herokuapp.com\";\n}\nconst token = `Bearer ${localStorage.getItem(\"key\")}`;\n\nexport { url, token };\n","import { url, token } from \"../../config\";\nimport { LOGIN } from \"../../types/employee\";\nimport jwt_decode from \"jwt-decode\";\nconst axios = require(\"axios\");\n\nexport const login = data => dispatch => {\n  return axios({\n    method: \"post\",\n    url: `${url}/api/v1/employees/login/`,\n    data: data,\n    headers: {\n      \"content-type\": \"application/json\"\n    }\n  })\n    .then(response => {\n      dispatch({\n        type: LOGIN,\n        payload: response.data.result\n      });\n      localStorage.setItem(\"key\", response.data.result.access);\n      return response.data;\n    })\n    .catch(err => {\n      return err;\n    });\n};\n\nexport const decodeToken = (token_key) => dispatch => {\n  const decoded = jwt_decode(token_key);\n  dispatch({\n    type: LOGIN,\n    payload: decoded\n  });\n  return decoded;\n};\n","import { url, token } from \"../../config\";\nimport { FETCH_LEAVE, CREATE_LEAVE } from \"../../types/leave\";\nconst axios = require(\"axios\");\n\nexport const createLeaveRequest = data => dispatch => {\n  return axios({\n    method: \"post\",\n    url: `${url}/api/v1/leave/`,\n    data: data,\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: token\n    }\n  })\n    .then(response => {\n      dispatch({\n        type: CREATE_LEAVE,\n        payload: response.data\n      });\n      console.log(response.data);\n      return response.data;\n    })\n    .catch(err => {\n      return err;\n    });\n};\n\nexport const fetchLeave = () => dispatch => {\n  return axios({\n    method: \"get\",\n    url: `${url}/api/v1/leave/`,\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: \"\"\n    }\n  })\n    .then(response => {\n      dispatch({\n        type: FETCH_LEAVE,\n        payload: response.data\n      });\n      console.log(response.data);\n      return response.data;\n    })\n    .catch(err => {\n      return err;\n    });\n};\n","export const FETCH_LEAVE = \"FETCH_LEAVE\";\nexport const CREATE_LEAVE = \"CREATE_LEAVE\";\n","import React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { login } from \"../../../redux/actions\";\nimport { useAlert } from \"react-alert\";\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCardGroup,\n  CCol,\n  CContainer,\n  CForm,\n  CInput,\n  CInputGroup,\n  CInputGroupPrepend,\n  CInputGroupText,\n  CRow\n} from \"@coreui/react\";\nimport CIcon from \"@coreui/icons-react\";\n\nconst Login = () => {\n  const alert = useAlert();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [userCreds, setUserCreds] = useState({});\n\n  const onInputChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    setUserCreds(() => {\n      userCreds[name] = value;\n      return { ...userCreds };\n    });\n  };\n\n  const handleSubmit = async () => {\n    const data = await dispatch(login({ ...userCreds }));\n    if (data.result) {\n      return history.push(\"/dashboard\");\n    } else {\n      alert.show(\"Id and passwod do not match!\");\n      return history.push(\"/login\");\n    }\n  };\n\n  return (\n    <div className=\"c-app c-default-layout flex-row align-items-center\">\n      <CContainer>\n        <CRow className=\"justify-content-center\">\n          <CCol md=\"5\">\n            <CCardGroup>\n              <CCard className=\"p-5\">\n                <CCardBody>\n                  <CForm>\n                    <h1>Login</h1>\n                    <p className=\"text-muted\">Sign In to your account</p>\n                    <CInputGroup className=\"mb-3\">\n                      <CInputGroupPrepend>\n                        <CInputGroupText>\n                          <CIcon name=\"cil-user\" />\n                        </CInputGroupText>\n                      </CInputGroupPrepend>\n                      <CInput type=\"text\" name=\"staff_id\" placeholder=\"Username\" autoComplete=\"username\" onChange={onInputChange} />\n                    </CInputGroup>\n                    <CInputGroup className=\"mb-4\">\n                      <CInputGroupPrepend>\n                        <CInputGroupText>\n                          <CIcon name=\"cil-lock-locked\" />\n                        </CInputGroupText>\n                      </CInputGroupPrepend>\n                      <CInput type=\"password\" name=\"password\" placeholder=\"Password\" autoComplete=\"current-password\" onChange={onInputChange} />\n                    </CInputGroup>\n                    <CInputGroup className=\"mb-4\">\n                      <CButton color=\"primary\" className=\"px-4 w-100\" onClick={handleSubmit}>\n                        Login\n                      </CButton>\n                    </CInputGroup>\n                    <CCol xs=\"6\" className=\"text-right\">\n                      <CButton color=\"link\" className=\"px-0\" onClick={handleSubmit}>\n                        Forgot password?\n                      </CButton>\n                    </CCol>\n                  </CForm>\n                </CCardBody>\n              </CCard>\n            </CCardGroup>\n          </CCol>\n        </CRow>\n      </CContainer>\n    </div>\n  );\n};\n\nexport default Login;\n"],"sourceRoot":""}