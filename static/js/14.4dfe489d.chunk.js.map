{"version":3,"sources":["views/pages/admin/UpdateEmployee.js"],"names":["UpdateEmployeeForm","props","history","useHistory","dispatch","useDispatch","useState","staffdetails","setStaffDetails","useSelector","state","users","user","id","match","params","console","log","handeleEmployeeInputChange","e","name","target","value","useLayoutEffect","fetchUser","fetchUsers","submitEditForm","a","updateUser","push","className","xs","md","row","sm","htmlFor","placeholder","lastname","required","onChange","firstname","middlename","type","annual_leave","sick_leave","exam_leave","compassionate_leave","staff_id","custom","line_manager","length","map","usr","role","size","color","onClick","goBack"],"mappings":"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","file":"static/js/14.4dfe489d.chunk.js","sourcesContent":["import React, { useState, useLayoutEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { updateUser } from \"../../../redux/actions\";\nimport { useHistory } from \"react-router-dom\";\nimport { fetchUsers, fetchUser } from \"../../../redux/actions\";\nimport { CButton, CCard, CCardBody, CCardFooter, CCardHeader, CCol, CForm, CFormGroup, CInput, CLabel, CSelect, CRow } from \"@coreui/react\";\nimport CIcon from \"@coreui/icons-react\";\n\nconst UpdateEmployeeForm = props => {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [staffdetails, setStaffDetails] = useState({});\n  const { user, users } = useSelector(state => state.users);\n  const id = props.match.params.id;\n\n  console.log(id);\n\n  const handeleEmployeeInputChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    setStaffDetails(() => {\n      staffdetails[name] = value;\n      return { ...staffdetails };\n    });\n  };\n\n  useLayoutEffect(() => {\n    dispatch(fetchUser(id));\n    dispatch(fetchUsers());\n  }, [dispatch, id]);\n\n  const submitEditForm = async () => {\n    const response = await dispatch(updateUser(id, staffdetails));\n    if (response.id) {\n      history.push(\"/admin/employees/\");\n    }\n  };\n\n  return (\n    <>\n      <CRow className=\"d-flex justify-content-center\">\n        <CCol xs=\"12\" md=\"6\">\n          <CCard>\n            <CCardHeader className=\"p-8 \">\n              <strong>Update Employee Details</strong>\n            </CCardHeader>\n            <CCardBody>\n              <CForm className=\"form-horizontal\">\n                <CFormGroup row>\n                  <CCol sm=\"12\" md=\"4\">\n                    <CLabel htmlFor=\"lastname\">Lastname</CLabel>\n                    <CInput id=\"lastname\" name=\"lastname\" placeholder={user.lastname} required onChange={handeleEmployeeInputChange} />\n                  </CCol>\n                  <CCol sm=\"12\" md=\"4\">\n                    <CLabel htmlFor=\"firstname\">FIrstname</CLabel>\n                    <CInput id=\"firstname\" name=\"firstname\" placeholder={user.firstname} required onChange={handeleEmployeeInputChange} />\n                  </CCol>\n                  <CCol sm=\"12\" md=\"4\">\n                    <CLabel htmlFor=\"middlename\">Othernames</CLabel>\n                    <CInput id=\"middlename\" name=\"middlename\" placeholder={user.middlename} onChange={handeleEmployeeInputChange} />\n                  </CCol>\n                </CFormGroup>\n                <CFormGroup row>\n                  <CCol sm=\"12\" md=\"4\">\n                    <CLabel htmlFor=\"annual_leave\">Annual Leave Bal.</CLabel>\n                    <CInput\n                      id=\"annual_leave\"\n                      name=\"annual_leave\"\n                      type=\"number\"\n                      placeholder={user.annual_leave}\n                      required\n                      onChange={handeleEmployeeInputChange}\n                    />\n                  </CCol>\n                  <CCol sm=\"12\" md=\"4\">\n                    <CLabel htmlFor=\"sick_leave\">Sick Leave Bal.</CLabel>\n                    <CInput\n                      id=\"sick_leave\"\n                      name=\"sick_leave\"\n                      type=\"number\"\n                      placeholder={user.sick_leave}\n                      required\n                      onChange={handeleEmployeeInputChange}\n                    />\n                  </CCol>\n                  <CCol sm=\"12\" md=\"4\">\n                    <CLabel htmlFor=\"exam_leave\">Exam Leave Bal.</CLabel>\n                    <CInput id=\"exam_leave\" name=\"exam_leave\" type=\"number\" placeholder={user.exam_leave} onChange={handeleEmployeeInputChange} />\n                  </CCol>\n                </CFormGroup>\n\n                <CFormGroup row>\n                  <CCol md=\"6\">\n                    <CLabel htmlFor=\"compassionate_leave\">Compassionate Leave Bal</CLabel>\n                    <CInput\n                      id=\"compassionate_leave\"\n                      name=\"compassionate_leave\"\n                      type=\"number\"\n                      placeholder={user.compassionate_leave}\n                      onChange={handeleEmployeeInputChange}\n                    />\n                  </CCol>\n                  <CCol md=\"6\">\n                    <CLabel htmlFor=\"staff_id\">Staff ID</CLabel>\n                    <CInput id=\"staff_id\" name=\"staff_id\" placeholder={user.staff_id} onChange={handeleEmployeeInputChange} />\n                  </CCol>\n                </CFormGroup>\n\n                <CFormGroup row>\n                  <CCol sm=\"12\" md=\"6\">\n                    <CLabel htmlFor=\"line_manager\">Direct Line Manager</CLabel>\n                    <CSelect custom name=\"line_manager\" id=\"line_manager\" onChange={handeleEmployeeInputChange}>\n                      <option value={user.line_manager && user.line_manager.id}>\n                        {user.line_manager && `${user.line_manager.firstname} ${user.line_manager.lastname}`}\n                      </option>\n                      {users &&\n                        users.length &&\n                        users.map(usr => <option key={usr.staff_id} value={usr.id}>{`${usr.firstname} ${usr.lastname}`}</option>)}\n                    </CSelect>\n                  </CCol>\n                  <CCol md=\"6\">\n                    <CLabel htmlFor=\"role\">Role</CLabel>\n                    <CSelect custom name=\"role\" id=\"role\" onChange={handeleEmployeeInputChange}>\n                      <option value={user.role}>{user.role}</option>\n                      <option value=\"ADMIN\">ADMIN</option>\n                      <option value=\"STAFF\">STAFF</option>\n                      <option value=\"MANAGER\">LINE MANAGER</option>\n                    </CSelect>\n                  </CCol>\n                </CFormGroup>\n              </CForm>\n            </CCardBody>\n            <CCardFooter className=\"d-flex justify-content-between\">\n              <CButton type=\"submit\" size=\"sm\" color=\"primary\" onClick={submitEditForm}>\n                <CIcon name=\"cil-scrubber\" /> Submit\n              </CButton>\n              <CButton type=\"reset\" size=\"sm\" color=\"danger\" onClick={() => history.goBack()}>\n                <CIcon name=\"cil-ban\" /> Cancel\n              </CButton>\n            </CCardFooter>\n          </CCard>\n        </CCol>\n      </CRow>\n    </>\n  );\n};\n\nexport default UpdateEmployeeForm;\n"],"sourceRoot":""}