{"version":3,"sources":["redux/actions/action/employee.js","redux/actions/action/leave.js","redux/config.js","views/pages/login/Login.js"],"names":["axios","require","login","data","dispatch","method","url","headers","then","response","type","LOGIN","payload","result","localStorage","setItem","access","catch","err","decodeToken","token_key","decoded","jwt_decode","fetchUsers","authorization","token","FETCH_USERS","results","fetchUser","id","FETCH_USER","createUser","CREATE_USER","updateUser","UPDATE_USER","logout","LOGOUT","deleteRecord","DELETE","resetPassword","RESET_PASSWORD","createLeaveRequest","CREATE_LEAVE","fetchLeaves","FETCH_LEAVE","updateStatus","status","UPDATE_LEAVE_STATUS","deleteLeave","getItem","Login","alert","useAlert","history","useHistory","useDispatch","useState","userCreds","setUserCreds","onInputChange","e","name","target","value","handleSubmit","a","console","log","push","show","className","md","placeholder","autoComplete","onChange","color","onClick","xs","preventDefault","Swal","fire","html","confirmButtonText","showCancelButton","preConfirm","Promise","resolve","reject","staff_id","document","getElementById","new_password","pasword2","isDismissed","text","icon","timer","button","success"],"mappings":"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","file":"static/js/10.70461d41.chunk.js","sourcesContent":["import { url, token } from \"../../config\";\nimport { LOGIN, FETCH_USERS, FETCH_USER, CREATE_USER, LOGOUT, DELETE, RESET_PASSWORD, UPDATE_USER } from \"../../types/employee\";\nimport jwt_decode from \"jwt-decode\";\nconst axios = require(\"axios\");\n\nexport const login = data => dispatch => {\n  return axios({\n    method: \"post\",\n    url: `${url}/api/v1/employees/login/`,\n    data: data,\n    headers: {\n      \"content-type\": \"application/json\"\n    }\n  })\n    .then(response => {\n      dispatch({\n        type: LOGIN,\n        payload: response.data.result\n      });\n      localStorage.setItem(\"key\", response.data.result.access);\n      return response.data;\n    })\n    .catch(err => {\n      return err;\n    });\n};\n\nexport const decodeToken = token_key => dispatch => {\n  const decoded = jwt_decode(token_key);\n  dispatch({\n    type: LOGIN,\n    payload: decoded\n  });\n  return decoded;\n};\n\nexport const fetchUsers = () => dispatch => {\n  return axios({\n    method: \"get\",\n    url: `${url}/api/v1/employees/`,\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: token\n    }\n  })\n    .then(response => {\n      dispatch({\n        type: FETCH_USERS,\n        payload: response.data.results\n      });\n      return response.data.results;\n    })\n    .catch(err => {\n      return err;\n    });\n};\n\nexport const fetchUser = id => dispatch => {\n  return axios({\n    method: \"get\",\n    url: `${url}/api/v1/employees/${id}`,\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: token\n    }\n  })\n    .then(response => {\n      dispatch({\n        type: FETCH_USER,\n        payload: response.data\n      });\n      return response.data;\n    })\n    .catch(err => {\n      return err;\n    });\n};\n\nexport const createUser = data => dispatch => {\n  return axios({\n    method: \"post\",\n    url: `${url}/api/v1/employees/`,\n    data: data,\n    headers: {\n      \"content-type\": \"application/json\"\n    }\n  })\n    .then(response => {\n      dispatch({\n        type: CREATE_USER,\n        payload: response.data\n      });\n      return response.data;\n    })\n    .catch(err => {\n      return err;\n    });\n};\n\nexport const updateUser = (id, data) => dispatch => {\n  return axios({\n    method: \"patch\",\n    url: `${ url }/api/v1/employees/${ id }/`,\n    data: data,\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: token\n    }\n  })\n    .then(response => {\n      dispatch({\n        type: UPDATE_USER,\n        payload: response.data\n      });\n      return response.data;\n    })\n    .catch(err => {\n      return err;\n    });\n};\n\nexport const logout = () => dispatch => {\n  dispatch({\n    type: LOGOUT\n  });\n};\n\nexport const deleteRecord = id => dispatch => {\n  return axios({\n    method: \"delete\",\n    url: `${url}/api/v1/employees/${id}/`,\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: token\n    }\n  }).then(response => {\n    dispatch({\n      type: DELETE,\n      payload: `${id}`\n    });\n    return response.data;\n  });\n};\n\nexport const resetPassword = data => dispatch => {\n  return axios({\n    method: \"post\",\n    url: `${url}/api/v1/employees/reset_password/`,\n    data: data,\n    headers: {\n      \"content-type\": \"application/json\"\n    }\n  }).then(response => {\n    dispatch({\n      type: RESET_PASSWORD,\n      payload: data[\"staff_id\"]\n    });\n    return response.data;\n  });\n};\n","import { url, token } from \"../../config\";\nimport { FETCH_LEAVE, CREATE_LEAVE, UPDATE_LEAVE_STATUS, DELETE } from \"../../types/leave\";\nconst axios = require(\"axios\");\n\nexport const createLeaveRequest = data => dispatch => {\n  return axios({\n    method: \"post\",\n    url: `${url}/api/v1/leave/`,\n    data: data,\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: token\n    }\n  })\n    .then(response => {\n      dispatch({\n        type: CREATE_LEAVE,\n        payload: response.data\n      });\n      return response.data;\n    })\n    .catch(err => {\n      return err;\n    });\n};\n\nexport const fetchLeaves = () => dispatch => {\n  return axios({\n    method: \"get\",\n    url: `${url}/api/v1/leave/`,\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: token\n    }\n  })\n    .then(response => {\n      dispatch({\n        type: FETCH_LEAVE,\n        payload: response.data.results\n      });\n      return response.data.results;\n    })\n    .catch(err => {\n      return err;\n    });\n};\n\nexport const updateStatus = (id, status) => dispatch => {\n  return axios({\n    method: \"patch\",\n    url: `${url}/api/v1/leave/${id}/update_status/`,\n    data: status,\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: token\n    }\n  })\n    .then(response => {\n      dispatch({\n        type: UPDATE_LEAVE_STATUS,\n        payload: response.data\n      });\n      return response.data;\n    })\n    .catch(err => {\n      return err;\n    });\n};\n\nexport const deleteLeave = id => dispatch => {\n  return axios({\n    method: \"delete\",\n    url: `${url}/api/v1/leave/${id}/`,\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: token\n    }\n  }).then(response => {\n    dispatch({\n      type: DELETE,\n      payload: `${id}`\n    });\n    return response.data;\n  });\n};\n","let url;\n\nif (process.env.NODE_ENV === \"development\") {\n  url = \"http://localhost:8000\";\n} else if (process.env.NODE_ENV === \"production\") {\n  url = \"https://egbin-api.herokuapp.com\";\n}\nconst token = `Bearer ${localStorage.getItem(\"key\")}`;\n\nconst validate = history => {\n  if (token && token.split(\" \")[1]) {\n    return history.push(\"/\");\n  }\n};\n\nexport { url, token, validate };\n","import React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { login } from \"../../../redux/actions\";\nimport { useAlert } from \"react-alert\";\nimport { resetPassword } from \"../../../redux/actions\";\nimport Swal from \"sweetalert2\";\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCardGroup,\n  CCol,\n  CContainer,\n  CForm,\n  CInput,\n  CInputGroup,\n  CInputGroupPrepend,\n  CInputGroupText,\n  CRow\n} from \"@coreui/react\";\nimport CIcon from \"@coreui/icons-react\";\n\nconst Login = () => {\n  const alert = useAlert();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [userCreds, setUserCreds] = useState({});\n\n  const onInputChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    setUserCreds(() => {\n      userCreds[name] = value;\n      return { ...userCreds };\n    });\n  };\n\n  const handleSubmit = async () => {\n    console.log(\"loggedin\");\n    const data = await dispatch(login({ ...userCreds }));\n    if (data.result) {\n      return history.push(\"/\");\n    } else {\n      alert.show(\"Id and passwod do not match!\");\n      return history.push(\"/login\");\n    }\n  };\n\n  const forgetPassword = e => {\n    e.preventDefault();\n\n    Swal.fire({\n      html: `\n  <form>\n   <h4 class=\"py-3\">Enter your Staff ID and New password</h4>\n  <div class=\"form-group\">\n    <label for=\"staff_id\">Staff ID</label>\n    <input type=\"text\" class=\"form-control\" id=\"staff_id\" placeholder=\"Enter Staff ID\">\n  </div>\n  <div class=\"form-group\">\n    <label for=\"new_password\">New Password</label>\n    <input type=\"password\" class=\"form-control\" id=\"new_password\" placeholder=\"Password\">\n  </div>\n  <div class=\"form-group\">\n    <label for=\"text\">Re-enter Password</label>\n    <input type=\"password\" class=\"form-control\" id=\"password2\" placeholder=\"Password\">\n  </div>\n</form>\n      `,\n      confirmButtonText: \"Confirm\",\n      showCancelButton: false,\n      preConfirm: function() {\n        return new Promise((resolve, reject) => {\n          resolve({\n            staff_id: document.getElementById(\"staff_id\").value,\n            new_password: document.getElementById(\"new_password\").value,\n            pasword2: document.getElementById(\"password2\").value\n          });\n        });\n      }\n    }).then(async data => {\n      if (data.isDismissed) {\n        return Swal.fire({\n          text: \"Cancelled\",\n          icon: \"error\",\n          timer: 1500\n        });\n      }\n      const { new_password, pasword2 } = data.value;\n      if (new_password !== pasword2) {\n        return Swal.fire({\n          text: \"Password do not match\",\n          icon: \"error\",\n          button: false,\n          timer: 2000\n        });\n      }\n      const response = await dispatch(resetPassword(data.value));\n\n      return response.success\n        ? Swal.fire({\n            text: \"Password Reset Successful\",\n            icon: \"success\",\n            button: false,\n            timer: 2000\n          })\n        : Swal.fire({\n            text: \"Problem Resetting Password\",\n            icon: \"error\",\n            timer: 1500\n          });\n    });\n  };\n\n  return (\n    <div className=\"c-app c-default-layout flex-row align-items-center\">\n      <CContainer>\n        <CRow className=\"justify-content-center\">\n          <CCol md=\"5\">\n            <CCardGroup>\n              <CCard className=\"p-5\">\n                <CCardBody>\n                  <CForm>\n                    <h1>Login</h1>\n                    <p className=\"text-muted\">Sign In to your account</p>\n                    <CInputGroup className=\"mb-3\">\n                      <CInputGroupPrepend>\n                        <CInputGroupText>\n                          <CIcon name=\"cil-user\" />\n                        </CInputGroupText>\n                      </CInputGroupPrepend>\n                      <CInput type=\"text\" name=\"staff_id\" placeholder=\"Username\" autoComplete=\"username\" onChange={onInputChange} />\n                    </CInputGroup>\n                    <CInputGroup className=\"mb-4\">\n                      <CInputGroupPrepend>\n                        <CInputGroupText>\n                          <CIcon name=\"cil-lock-locked\" />\n                        </CInputGroupText>\n                      </CInputGroupPrepend>\n                      <CInput type=\"password\" name=\"password\" placeholder=\"Password\" autoComplete=\"current-password\" onChange={onInputChange} />\n                    </CInputGroup>\n                    <CInputGroup className=\"mb-4\">\n                      <CButton color=\"primary\" className=\"px-4 w-100\" onClick={handleSubmit}>\n                        Login\n                      </CButton>\n                    </CInputGroup>\n                    <CCol xs=\"6\" className=\"text-right\">\n                      <CButton color=\"link\" className=\"px-0\" onClick={forgetPassword}>\n                        Forgot password?\n                      </CButton>\n                    </CCol>\n                  </CForm>\n                </CCardBody>\n              </CCard>\n            </CCardGroup>\n          </CCol>\n        </CRow>\n      </CContainer>\n    </div>\n  );\n};\n\nexport default Login;\n"],"sourceRoot":""}