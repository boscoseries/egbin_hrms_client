{"version":3,"sources":["redux/actions/action/employee.js","redux/actions/action/leave.js","redux/config.js","views/pages/login/Login.js"],"names":["axios","require","login","data","dispatch","method","url","headers","then","response","type","LOGIN","payload","result","localStorage","setItem","access","catch","err","decodeToken","token_key","decoded","jwt_decode","fetchUsers","authorization","token","FETCH_USERS","fetchUser","id","FETCH_USER","createUser","CREATE_USER","createLeaveRequest","CREATE_LEAVE","console","log","fetchLeaves","FETCH_LEAVE","results","updateStatus","status","UPDATE_LEAVE_STATUS","getItem","Login","alert","useAlert","history","useHistory","useDispatch","useState","userCreds","setUserCreds","onInputChange","e","name","target","value","handleSubmit","a","push","show","className","md","placeholder","autoComplete","onChange","color","onClick","xs"],"mappings":"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","file":"static/js/7.1a3e6c97.chunk.js","sourcesContent":["import { url, token } from \"../../config\";\nimport { LOGIN, FETCH_USERS, FETCH_USER, CREATE_USER } from \"../../types/employee\";\nimport jwt_decode from \"jwt-decode\";\nconst axios = require(\"axios\");\n\nexport const login = data => dispatch => {\n  return axios({\n    method: \"post\",\n    url: `${url}/api/v1/employees/login/`,\n    data: data,\n    headers: {\n      \"content-type\": \"application/json\"\n    }\n  })\n    .then(response => {\n      dispatch({\n        type: LOGIN,\n        payload: response.data.result\n      });\n      localStorage.setItem(\"key\", response.data.result.access);\n      return response.data;\n    })\n    .catch(err => {\n      return err;\n    });\n};\n\nexport const decodeToken = token_key => dispatch => {\n  const decoded = jwt_decode(token_key);\n  dispatch({\n    type: LOGIN,\n    payload: decoded\n  });\n  return decoded;\n};\n\nexport const fetchUsers = () => dispatch => {\n  return axios({\n    method: \"get\",\n    url: `${url}/api/v1/employees/`,\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: token\n    }\n  })\n    .then(response => {\n      dispatch({\n        type: FETCH_USERS,\n        payload: response.data\n      });\n      return response.data;\n    })\n    .catch(err => {\n      return err;\n    });\n};\n\nexport const fetchUser = id => dispatch => {\n  return axios({\n    method: \"get\",\n    url: `${url}/api/v1/employees/${id}`,\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: token\n    }\n  })\n    .then(response => {\n      dispatch({\n        type: FETCH_USER,\n        payload: response.data\n      });\n      return response.data;\n    })\n    .catch(err => {\n      return err;\n    });\n};\n\nexport const createUser = data => dispatch => {\n  return axios({\n    method: \"post\",\n    url: `${url}/api/v1/employees/`,\n    data: data,\n    headers: {\n      \"content-type\": \"application/json\"\n    }\n  })\n    .then(response => {\n      dispatch({\n        type: CREATE_USER,\n        payload: response.data\n      });\n      return response.data;\n    })\n    .catch(err => {\n      return err;\n    });\n};\n","import { url, token } from \"../../config\";\nimport { FETCH_LEAVE, CREATE_LEAVE, UPDATE_LEAVE_STATUS } from \"../../types/leave\";\nconst axios = require(\"axios\");\n\nexport const createLeaveRequest = data => dispatch => {\n  return axios({\n    method: \"post\",\n    url: `${url}/api/v1/leave/`,\n    data: data,\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: token\n    }\n  })\n    .then(response => {\n      dispatch({\n        type: CREATE_LEAVE,\n        payload: response.data\n      });\n      console.log(response.data);\n      return response.data;\n    })\n    .catch(err => {\n      return err;\n    });\n};\n\nexport const fetchLeaves = () => dispatch => {\n  return axios({\n    method: \"get\",\n    url: `${url}/api/v1/leave/`,\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: token\n    }\n  })\n    .then(response => {\n      dispatch({\n        type: FETCH_LEAVE,\n        payload: response.data.results\n      });\n      return response.data.results;\n    })\n    .catch(err => {\n      return err;\n    });\n};\n\nexport const updateStatus = (id, status) => dispatch => {\n  return axios({\n    method: \"patch\",\n    url: `${url}/api/v1/leave/${id}/update_status/`,\n    data: { status },\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: token\n    }\n  })\n    .then(response => {\n      dispatch({\n        type: UPDATE_LEAVE_STATUS,\n        payload: response.data.results\n      });\n      console.log(response);\n      return response.data.results;\n    })\n    .catch(err => {\n      return err;\n    });\n};\n","let url;\n\nif (process.env.NODE_ENV === \"development\") {\n  url = \"http://localhost:8000\";\n} else if (process.env.NODE_ENV === \"production\") {\n  url = \"https://egbin-api.herokuapp.com\";\n}\nconst token = `Bearer ${localStorage.getItem(\"key\")}`;\n\nconst validate = history => {\n  if (token && token.split(\" \")[1]) {\n    return history.push(\"/\");\n  }\n};\n\nexport { url, token, validate };\n","import React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { login } from \"../../../redux/actions\";\nimport { useAlert } from \"react-alert\";\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCardGroup,\n  CCol,\n  CContainer,\n  CForm,\n  CInput,\n  CInputGroup,\n  CInputGroupPrepend,\n  CInputGroupText,\n  CRow\n} from \"@coreui/react\";\nimport CIcon from \"@coreui/icons-react\";\n\nconst Login = () => {\n  const alert = useAlert();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [userCreds, setUserCreds] = useState({});\n\n  const onInputChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    setUserCreds(() => {\n      userCreds[name] = value;\n      return { ...userCreds };\n    });\n  };\n\n  const handleSubmit = async () => {\n    console.log(\"loggedin\");\n    const data = await dispatch(login({ ...userCreds }));\n    if (data.result) {\n      return history.push(\"/dashboard\");\n    } else {\n      alert.show(\"Id and passwod do not match!\");\n      return history.push(\"/login\");\n    }\n  };\n\n  return (\n    <div className=\"c-app c-default-layout flex-row align-items-center\">\n      <CContainer>\n        <CRow className=\"justify-content-center\">\n          <CCol md=\"5\">\n            <CCardGroup>\n              <CCard className=\"p-5\">\n                <CCardBody>\n                  <CForm>\n                    <h1>Login</h1>\n                    <p className=\"text-muted\">Sign In to your account</p>\n                    <CInputGroup className=\"mb-3\">\n                      <CInputGroupPrepend>\n                        <CInputGroupText>\n                          <CIcon name=\"cil-user\" />\n                        </CInputGroupText>\n                      </CInputGroupPrepend>\n                      <CInput type=\"text\" name=\"staff_id\" placeholder=\"Username\" autoComplete=\"username\" onChange={onInputChange} />\n                    </CInputGroup>\n                    <CInputGroup className=\"mb-4\">\n                      <CInputGroupPrepend>\n                        <CInputGroupText>\n                          <CIcon name=\"cil-lock-locked\" />\n                        </CInputGroupText>\n                      </CInputGroupPrepend>\n                      <CInput type=\"password\" name=\"password\" placeholder=\"Password\" autoComplete=\"current-password\" onChange={onInputChange} />\n                    </CInputGroup>\n                    <CInputGroup className=\"mb-4\">\n                      <CButton color=\"primary\" className=\"px-4 w-100\" onClick={handleSubmit}>\n                        Login\n                      </CButton>\n                    </CInputGroup>\n                    <CCol xs=\"6\" className=\"text-right\">\n                      <CButton color=\"link\" className=\"px-0\" onClick={handleSubmit}>\n                        Forgot password?\n                      </CButton>\n                    </CCol>\n                  </CForm>\n                </CCardBody>\n              </CCard>\n            </CCardGroup>\n          </CCol>\n        </CRow>\n      </CContainer>\n    </div>\n  );\n};\n\nexport default Login;\n"],"sourceRoot":""}